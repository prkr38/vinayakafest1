<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Phone OTP Verification</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
</head>
<body>
  <h2>Phone OTP Verification</h2>

  <label>Enter Phone Number (with country code):</label>
  <input type="text" id="phone" placeholder="+911234567890">
  <div id="recaptcha-container"></div>
  <button onclick="sendOTP()">Send OTP</button>

  <br><br>

  <label>Enter OTP:</label>
  <input type="text" id="otp">
  <button onclick="verifyOTP()">Verify OTP</button>

  <p id="result"></p>

  <script>
    // TODO: Replace with your Firebase project configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCIngDaeETxjqhSiAoMms4uMjNURxDnC0c",
      authDomain: "vinayakafest.firebaseapp.com",
      projectId: "vinayakafest",
      storageBucket: "vinayakafest.firebasestorage.app",
      messagingSenderId: "787239874576",
      appId: "1:787239874576:web:5929e74bdf3f0fe9dfda95"
    };

    firebase.initializeApp(firebaseConfig);

    window.onload = function () {
      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
        size: 'normal',
        callback: function(response) {
          console.log("reCAPTCHA verified");
        }
      });
    };

    let confirmationResult;

    function sendOTP() {
      const phoneNumber = document.getElementById('phone').value;
      firebase.auth().signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier)
        .then(function (result) {
          confirmationResult = result;
          document.getElementById('result').innerText = "OTP sent successfully!";
        }).catch(function (error) {
          document.getElementById('result').innerText = error.message;
        });
    }

    function verifyOTP() {
      const otpCode = document.getElementById('otp').value;
      confirmationResult.confirm(otpCode).then(function (result) {
        document.getElementById('result').innerText = "Phone number verified!";
      }).catch(function (error) {
        document.getElementById('result').innerText = error.message;
      });
    }
  </script>
</body>
</html>
